{"ast":null,"code":"var _jsxFileName = \"/Users/theresarutledge/Desktop/Bootcamp/projects/shop-shop/client/src/pages/Success.js\";\nimport React, { useEffect } from 'react';\nimport { useMutation } from '@apollo/react-hooks';\nimport Jumbotron from '../components/Jumbotron';\nimport { ADD_ORDER } from '../utils/mutations';\nimport { idbPromise } from '../utils/helpers';\nconst [addOrder] = useMutation(ADD_ORDER);\nuseEffect(() => {\n  async function saveOrder() {\n    const cart = await idbPromise('cart', 'get');\n    const products = cart.map(item => {\n      item._id;\n    });\n\n    if (products.length) {\n      const {\n        data\n      } = await addOrder({\n        variables: {\n          products\n        }\n      });\n      const productData = data.addOrder.products;\n      productData.forEach(item => {\n        idbPromise('cart', 'delete', item);\n      });\n    }\n  }\n\n  saveOrder();\n}, [addOrder]);\nsetTimeout(() => {\n  window.location.assign('/');\n}, 3000);\n\nfunction Success() {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Jumbotron, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 11\n    }\n  }, \"Success!\"), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 11\n    }\n  }, \"Thank you for your purchase!\"), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 11\n    }\n  }, \"You will now be redirected to the homepage\")));\n}\n\n;\nexport default Success;","map":{"version":3,"sources":["/Users/theresarutledge/Desktop/Bootcamp/projects/shop-shop/client/src/pages/Success.js"],"names":["React","useEffect","useMutation","Jumbotron","ADD_ORDER","idbPromise","addOrder","saveOrder","cart","products","map","item","_id","length","data","variables","productData","forEach","setTimeout","window","location","assign","Success"],"mappings":";AAAA,OAAOA,KAAP,IAAcC,SAAd,QAA+B,OAA/B;AACA,SAASC,WAAT,QAA4B,qBAA5B;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,SAAQC,SAAR,QAAwB,oBAAxB;AACA,SAAQC,UAAR,QAAyB,kBAAzB;AAGA,MAAM,CAACC,QAAD,IAAaJ,WAAW,CAACE,SAAD,CAA9B;AAEAH,SAAS,CAAC,MAAK;AACd,iBAAeM,SAAf,GAA2B;AACxB,UAAMC,IAAI,GAAG,MAAMH,UAAU,CAAC,MAAD,EAAQ,KAAR,CAA7B;AACA,UAAMI,QAAQ,GAAGD,IAAI,CAACE,GAAL,CAASC,IAAI,IAAI;AAC7BA,MAAAA,IAAI,CAACC,GAAL;AACJ,KAFgB,CAAjB;;AAIA,QAAGH,QAAQ,CAACI,MAAZ,EAAmB;AACf,YAAM;AAACC,QAAAA;AAAD,UAAS,MAAMR,QAAQ,CAAC;AAACS,QAAAA,SAAS,EAAC;AAACN,UAAAA;AAAD;AAAX,OAAD,CAA7B;AACA,YAAMO,WAAW,GAAGF,IAAI,CAACR,QAAL,CAAcG,QAAlC;AAEAO,MAAAA,WAAW,CAACC,OAAZ,CAAqBN,IAAD,IAAS;AACzBN,QAAAA,UAAU,CAAC,MAAD,EAAQ,QAAR,EAAiBM,IAAjB,CAAV;AACH,OAFD;AAGH;AACH;;AACDJ,EAAAA,SAAS;AACT,CAjBQ,EAiBP,CAACD,QAAD,CAjBO,CAAT;AAmBAY,UAAU,CAAC,MAAI;AACfC,EAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,GAAvB;AACC,CAFS,EAER,IAFQ,CAAV;;AAKA,SAASC,OAAT,GAAmB;AACf,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCAFF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kDALF,CADF,CADF;AAaD;;AAAA;AAED,eAAeA,OAAf","sourcesContent":["import React,{useEffect } from 'react';\nimport { useMutation } from '@apollo/react-hooks';\nimport Jumbotron from '../components/Jumbotron';\nimport {ADD_ORDER} from '../utils/mutations';\nimport {idbPromise} from '../utils/helpers';\n\n\nconst [addOrder] = useMutation(ADD_ORDER);\n\nuseEffect(()=> {\n async function saveOrder() {\n    const cart = await idbPromise('cart','get');\n    const products = cart.map(item => {\n         item._id\n    });\n\n    if(products.length){\n        const {data} = await addOrder({variables:{products}});\n        const productData = data.addOrder.products;\n\n        productData.forEach((item)=> {\n            idbPromise('cart','delete',item);\n        })\n    }\n }\n saveOrder();\n},[addOrder]);\n\nsetTimeout(()=>{\nwindow.location.assign('/')\n},3000);\n\n\nfunction Success() {\n    return (\n      <div>\n        <Jumbotron>\n          <h1>Success!</h1>\n          <h2>\n            Thank you for your purchase!\n          </h2>\n          <h2>\n            You will now be redirected to the homepage\n          </h2>\n        </Jumbotron>\n      </div>\n    );\n  };\n\n  export default Success;"]},"metadata":{},"sourceType":"module"}